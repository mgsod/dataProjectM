<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据项目管理</title>
    <#include "../../module/css.html">
        <link rel="stylesheet" href="${staticAddress}/css/lib/foundation-datepicker.min.css">
        </head>
<body class="ck_bg_deepblack" ng-controller="controller">
<input id="http" type="hidden" value="${staticAddress}">
<input id="mapJson" type="hidden" value='${mapJson}'>
<#include "../../module/top.html">
    <div class="ck_content ck_leftbar_250px ck_bg_gray">
        <section class="bg_gray">
            <div class="ck_part">
                <h3>数据抓取</h3>
            </div>
        </section>
        <br/>
        <section class="ck_pr">
            <ul class="ck_tab">
                <li class="active">数据抓取列表</li>
            </ul>
            <a class="ck_pa ck_bg_rosiness ck_btn" ng-click="settingData(0,{})" style="right:40px;bottom:0">+</a>
        </section>
        <section class="table-responsive">
            <div class="dataListMinBox">
                <table class="ck_table ck_table_line">
                    <thead class="bg_gray">
                    <tr>
                        <th>序号</th>
                        <th>名称</th>
                        <th>抓取方式</th>
                        <th>数据源</th>
                        <th>数据类型</th>
                        <th>条件</th>
                        <th>抓取频次</th>
                        <th>数量</th>
                        <th>状态</th>
                        <th>操作</th>
                    </thead>
                    <tbody class="ck_bg_white">
                    <tr ng-repeat="item in dataList">
                        <td>{{item.paramId}}</td>
                        <td>{{item.taskName}}</td>
                        <td>{{item.crawlWayName}}<span ng-if="item.crawlType == 'mobileCrawl'">(移动)</span></td>
                        <td>{{item.datasourceName}}</td>
                        <td>{{item.datasourceTypeName}}</td>
                        <td> <span onmouseenter="showAlt(this)" onmouseleave="hideAlt()"
                                   message="{{item.inputParams}}">{{item.inputParams.length>15?item.inputParams.substr(0,15)+"...":item.inputParams}}</span>
                        </td>
                        <td>{{item.crawlFreq}}</td>
                        <td>{{item.count}}</td>
                        <td>{{item.statusName}}</td>
                        <td>
                            <a class="ck_font_green" ng-if="item.status!=1" ng-click="doStartData(item.paramId)">&nbsp;启动&nbsp;</a>
                            <a class="ck_font_blue" ng-if="item.status!=1" ng-click="settingData(1,item.jsonParam)">&nbsp;编辑&nbsp;</a>
                            <a class="ck_font_rosiness" ng-if="item.status==1" ng-click="doStopData(item.paramId)">&nbsp;停止&nbsp;</a>
                            <a class="ck_font_rosiness" ng-if="item.status!=1" ng-click="doDelete(item.paramId)">&nbsp;删除&nbsp;</a>
                            <a class="ck_font_blue" target="_blank"
                               href="/toDataModular.html?projectId={{projectId}}&typeNo={{typeNo}}&paramId={{item.paramId}}">
                                &nbsp;查看&nbsp;</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div id="myAlt" class="ck_pa ck_bg_gunjyo ck_dn"
                     style="max-width:300px;color:#FFFFFF;left:40%;top:50%;padding: 0.5em 1em;font-size:14px;border-radius:6px">
                </div>
            </div>
        </section>
        <section id="workFlowPart" class="workFlowBox">

        </section>
        <section>
            <div class="toolbar tac">
            <span ng-if="isCreate==0">
            <a class="ck_btn ck_btn_sure" ng-click="goPre()">上一步</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a class="ck_btn ck_btn_success" ng-click="goNext()">下一步</a>
            </span>
                <span ng-if="isCreate==1">
            <a class="ck_btn ck_btn_success" ng-click="goIndex()">完成</a>
            </span>
            </div>
        </section>
    </div>
    <#include "../../module/script.html">
        <script src="${staticAddress}/js/view/projectManager/workFlowLayoutPage/dataCrawlPage.js"></script>
</body>
</html>