<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据项目管理</title>
    <#include "../../module/css.html">
        </head>
<body class="ck_bg_deepblack" ng-controller="controller">
<input id="http" type="hidden" value="${staticAddress}">
<input id="mapJson" type="hidden" value='${mapJson}'>
<#include "../../module/top.html">
    <div class="ck_content ck_leftbar_250px ck_bg_gray">
        <section class="bg_gray">
            <div class="ck_part">
                <h3>文件导出</h3>
            </div>
        </section>
        <br/>
        <section class="ck_pr">
            <ul class="ck_tab">
                <li class="active">文件导出设置</li>
            </ul>
            <a class="ck_pa ck_bg_rosiness ck_btn" ng-click="dataOutputModule(0)" style="right:40px;bottom:0">+</a>
        </section>
        <section class="table-responsive">
            <div class="dataListMinBox">
                <table class="ck_table ck_table_line">
                    <thead class="bg_gray">
                    <tr>
                        <th> 序号</th>
                        <th> 名称</th>
                        <th>值</th>
                        <th>数据类型</th>
                        <th>分析层级</th>
                        <th>语料层级</th>
                        <th>导出状态</th>
                        <th>操作</th>
                    </thead>
                    <tbody class="ck_bg_white">
                    <tr ng-repeat="item in dataList | orderBy:sortStatus">
                        <td>{{item.paramId}}</td>
                        <td> <span onmouseenter="showAlt(this)" onmouseleave="hideAlt()"
                                   message="{{item.filename}}">{{item.filename.length<15?item.filename:item.filename.substr(0,15)+"..."}}</span>
                        </td>
                        <td>
                           <span onmouseenter="showAlt(this)" onmouseleave="hideAlt()"
                                 message="{{item.queryFieldName}}"> {{item.queryFieldName.length<15?item.queryFieldName:item.queryFieldName.substr(0,15)+"..."}}</span>
                        </td>
                        <td>{{item.dataSourceTypeName}}
                        </td>
                        <td>{{item.analysisObjectName}}</td>
                        <td>{{item.analysisLevel}}</td>
                        <td>
                            <span ng-if="item.jobStatus=='0'">初始</span>
                            <div ng-if="item.jobStatus==1" class="ck_progress"
                                 ck-controlsprogress="progressFileOutput{{item.id}}">
                                <div class="ck_bg_popcorn ck_pa" ck-progress="progressFileOutput{{item.id}}"
                                     progress-value="{{item.jobProgress}}">
                                </div>
                            </div>
                            <span ng-if="item.jobStatus=='2'">已完成</span>
                            <span ng-if="item.jobStatus=='9'" onmouseenter="showAlt(this)" onmouseleave="hideAlt()"
                                  message="{{item.errorMsg}}">错误</span>
                            <!--  {{item.jobStatus=='0'?"初始":item.jobStatus=='1'?'导出中':item.jobStatus=='2'?'已完成':'错误'}}{{item.jobStatus=='1'?"|"+item.jobProgress+"%":""}}-->
                        </td>
                        <td><a class="ck_font_rosiness" ng-if="item.jobStatus=='2'"
                               ng-click="doDownLoadFile(item.fileUrl)">
                            &nbsp;下载&nbsp;</a>
                            <!--此处 在下个版本记得解放-->
                            <a class="ck_font_rosiness" ng-click="doDeleteFile(item.paramId)">
                                &nbsp;删除&nbsp;</a></td>
                    </tr>
                    </tbody>
                </table>
                <div id="myAlt" class="ck_pa ck_bg_gunjyo ck_dn"
                     style="max-width:300px;color:#FFFFFF;left:40%;top:50%;padding: 0.5em 1em;font-size:14px;border-radius:6px">
                </div>
            </div>
        </section>
        <section id="workFlowPart" class="workFlowBox">

        </section>
        <section>
            <div class="toolbar tac">
            <span ng-if="isCreate==0">
            <a class="ck_btn ck_btn_sure" ng-click="goPre()">上一步</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a class="ck_btn ck_btn_success" ng-click="goNext()">下一步</a>
            </span>
                <span ng-if="isCreate==1">
            <a class="ck_btn ck_btn_success" ng-click="goIndex()">完成</a>
            </span>
            </div>
        </section>
    </div>
    <#include "../../module/script.html">
        <script src="${staticAddress}/js/view/projectManager/workFlowLayoutPage/fileOutputPage.js"></script>
</body>
</html>